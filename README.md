# Delivery Service

Сервис для управления посылками с расчетом стоимости доставки и привязкой к транспортным компаниям.

---

## Описание

Проект реализован на FastAPI с использованием Pydantic для валидации данных, MySQL для хранения основной информации, Redis для кеширования и MongoDB для хранения логов расчетов стоимости доставки.

Swagger документация доступна после запуска проекта по адресу:  
**OpenAPI:** [http://localhost:8000/api/openapi#/](http://127.0.0.1:8000/api/openapi#/)

### Основные возможности

- Регистрация посылки с валидацией входных данных  
- Получение списка типов посылок из отдельной таблицы  
- Получение списка посылок пользователя с фильтрацией и пагинацией  
- Получение информации о конкретной посылке по ID  
- Регистрация посылок через брокер сообщений Celery + RabbitMQ с гарантией асинхронности (Периодическая задача расчета стоимость доставки больше не нужна)
- Подсчет суммы стоимостей доставок всех посылок по типам за день
- Привязка посылок к транспортным компаниям с атомарной операцией закрепления 
- Логирование и обработка ошибок  
- Полная докеризация проекта и всех зависимостей  

---

## Технологический стек

- Python 3.12  
- FastAPI  
- Pydantic  
- SQLAlchemy (асинхронный режим)  
- MySQL  
- Redis  
- MongoDB  
- Celery + RabbitMQ  
- Alembic (миграции)  
- Docker, Docker Compose  
- Pytest для тестирования  

---

## Предварительные шаги

- Установите `make` (если ещё не установлен)  
- Создайте файл окружения на основе примера:  
```bash
cp env.example .env
```

## Запуск

```bash
make start_app
```

## Запуск тестов

```bash
make start_tests
```